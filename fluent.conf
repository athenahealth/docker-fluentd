<source>
  @type prometheus
  port  24231
</source>

# input plugin that collects metrics from MonitorAgent
<source>
  @type prometheus_monitor
  <labels>
    host ${hostname}
  </labels>
</source>

# input plugin that collects metrics for output plugin
<source>
  @type prometheus_output_monitor
  <labels>
    host ${hostname}
  </labels>
</source>

# input plugin that collects metrics for in_tail plugin
<source>
  @type prometheus_tail_monitor
  <labels>
    host ${hostname}
  </labels>
</source>

<source>
  @type systemd
  tag journald
  path /var/log/journal
  read_from_head true
  <storage>
    @type local
    persistent true
    path /fluentd/log/journald.pos
  </storage>
  <entry>
    field_map {"_HOSTNAME": "host", "MESSAGE": "short_message", "PRIORITY": "level"}
    fields_strip_underscores true
    fields_lowercase true
  </entry>
</source>

<match **>
  @type  stdout
  format gelf
</match>
